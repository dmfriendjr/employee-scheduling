<nav class="navbar navbar-default">
  <div class="container-fluid">
    <h3 class="navbar-header">{{user.company}}</h3>
    <li class="navbar-right dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#">Signed in as {{user.username}}</a>
      <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="/logout">
            <i class="fas fa-sign-out-alt"></i>Logout
          </a>
        </li>
      </ul>
  </div>
</nav>


<h1>Employees</h1>
{{!--<a href="/timetable">Timetable</a> --}} 
{{message}}
<form method="post" action="/employees">
  <label for="name">Employee Name</label>
  <input type="text" name="name" value={{employeeName}}>
  <label for="phone_number">Phone Number</label>
  <input type="text" name="phone_number" value={{employeePhone}}>
  <label for="email">Email</label>
  <input type="Text" name="email" value={{employeeEmail}}>
  <button type="submit">Add Employee</button>
</form>

<ul>
  {{#each employees}}
  <li id={{id}}>
    {{name}} {{phone_number}} {{email}}
    <button class="deleteEmployee">Delete</button>
  </li>
  {{/each}}
</ul>

<script>
  $('.deleteEmployee').on('click', (event) => {
    console.log(event.target.parentNode.id);
    $.ajax({
      method: 'DELETE',
      url: '/employees',
      contentType: 'application/json',
      data: JSON.stringify({
        id: event.target.parentNode.id
      }),
    }).then(() => {
      location.reload();
    });
  });
</script>